{%- comment -%}
  AONA INDIA - Express Delivery Page Snippet
  30 Minutes Delivery Page with full styling
{%- endcomment -%}

<div class="express-page">
  <!-- Header Banner -->
  <div class="express-header">
    <div class="express-header-content">
      <span class="express-badge">‚ö° EXPRESS</span>
      <h1 class="express-title">30 Minutes Delivery</h1>
      <p class="express-subtitle">Get your favorite artisan pieces delivered in just 30 minutes!</p>
      <div class="express-timer">
        <div class="timer-item">
          <span class="timer-value" id="express-hours">00</span>
          <span class="timer-label">Hours</span>
        </div>
        <div class="timer-sep">:</div>
        <div class="timer-item">
          <span class="timer-value" id="express-mins">30</span>
          <span class="timer-label">Mins</span>
        </div>
        <div class="timer-sep">:</div>
        <div class="timer-item">
          <span class="timer-value" id="express-secs">00</span>
          <span class="timer-label">Secs</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Location Check -->
  <div class="location-section">
    <div class="location-card">
      <div class="location-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#880015" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
          <circle cx="12" cy="10" r="3"/>
        </svg>
      </div>
      <div class="location-content">
        <h3>Check Delivery Availability</h3>
        <p>Enter your pincode to check if express delivery is available in your area</p>
        <div class="pincode-input-group">
          <input type="text" class="pincode-input" placeholder="Enter Pincode" maxlength="6" pattern="[0-9]*">
          <button class="pincode-btn">Check</button>
        </div>
        <div class="delivery-result" style="display: none;">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
          <span>Express delivery available! Get it in <strong>30 minutes</strong></span>
        </div>
      </div>
    </div>
  </div>

  <!-- How It Works -->
  <div class="how-it-works">
    <h2 class="section-heading">How It Works</h2>
    <div class="steps-grid">
      <div class="step-card">
        <div class="step-icon" style="background: #fef3c7;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2">
            <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"/>
          </svg>
        </div>
        <h4>1. Shop</h4>
        <p>Browse express items</p>
      </div>
      <div class="step-card">
        <div class="step-icon" style="background: #dbeafe;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
            <circle cx="12" cy="10" r="3"/>
          </svg>
        </div>
        <h4>2. Location</h4>
        <p>Enter your pincode</p>
      </div>
      <div class="step-card">
        <div class="step-icon" style="background: #dcfce7;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2">
            <rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h4l3 3v5h-7V8z"/>
            <circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/>
          </svg>
        </div>
        <h4>3. Dispatch</h4>
        <p>Instant dispatch</p>
      </div>
      <div class="step-card">
        <div class="step-icon" style="background: #fce7f3;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#ec4899" stroke-width="2">
            <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
        </div>
        <h4>4. Delivery</h4>
        <p>At your doorstep</p>
      </div>
    </div>
  </div>

  <!-- Express Products -->
  <div class="express-products">
    <h2 class="section-heading">Express Delivery Items</h2>
    <div class="products-grid">
      {%- for product in collections['express-delivery'].products limit: 8 -%}
        {% render 'crimson-card', product: product, show_express: true %}
      {%- else -%}
        <!-- Sample Express Products -->
        <div class="crimson-card">
          <div class="crimson-card__image-wrapper">
            <div class="crimson-card__image" style="background: linear-gradient(135deg, #f8f4e8 0%, #e8dcc8 100%); display: flex; align-items: center; justify-content: center;">
              <span style="font-size: 48px;">üïâÔ∏è</span>
            </div>
            <span class="crimson-card__badge crimson-card__badge--express">‚ö° EXPRESS</span>
            <button class="crimson-card__wishlist"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg></button>
            <div class="crimson-card__rating"><svg width="10" height="10" viewBox="0 0 24 24" fill="#f59e0b"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg> 4.8</div>
          </div>
          <div class="crimson-card__content">
            <p class="crimson-card__brand">AONA INDIA</p>
            <h3 class="crimson-card__title">Brass Ganesha Idol - Small</h3>
            <div class="crimson-card__price-row">
              <span class="crimson-card__price">‚Çπ2,499</span>
              <span class="crimson-card__compare-price">‚Çπ3,499</span>
              <span class="crimson-card__discount">29% OFF</span>
            </div>
          </div>
        </div>
        
        <div class="crimson-card">
          <div class="crimson-card__image-wrapper">
            <div class="crimson-card__image" style="background: linear-gradient(135deg, #e8f0f8 0%, #c8d8e8 100%); display: flex; align-items: center; justify-content: center;">
              <span style="font-size: 48px;">‚ò∏Ô∏è</span>
            </div>
            <span class="crimson-card__badge crimson-card__badge--express">‚ö° EXPRESS</span>
            <button class="crimson-card__wishlist"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg></button>
            <div class="crimson-card__rating"><svg width="10" height="10" viewBox="0 0 24 24" fill="#f59e0b"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg> 4.6</div>
          </div>
          <div class="crimson-card__content">
            <p class="crimson-card__brand">AONA INDIA</p>
            <h3 class="crimson-card__title">Buddha Head Sculpture</h3>
            <div class="crimson-card__price-row">
              <span class="crimson-card__price">‚Çπ1,899</span>
              <span class="crimson-card__compare-price">‚Çπ2,499</span>
              <span class="crimson-card__discount">24% OFF</span>
            </div>
          </div>
        </div>
        
        <div class="crimson-card">
          <div class="crimson-card__image-wrapper">
            <div class="crimson-card__image" style="background: linear-gradient(135deg, #f8e8e8 0%, #e8c8c8 100%); display: flex; align-items: center; justify-content: center;">
              <span style="font-size: 48px;">ü™î</span>
            </div>
            <span class="crimson-card__badge crimson-card__badge--express">‚ö° EXPRESS</span>
            <button class="crimson-card__wishlist"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg></button>
            <div class="crimson-card__rating"><svg width="10" height="10" viewBox="0 0 24 24" fill="#f59e0b"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg> 4.9</div>
          </div>
          <div class="crimson-card__content">
            <p class="crimson-card__brand">AONA INDIA</p>
            <h3 class="crimson-card__title">Brass Diya Set of 5</h3>
            <div class="crimson-card__price-row">
              <span class="crimson-card__price">‚Çπ999</span>
              <span class="crimson-card__compare-price">‚Çπ1,499</span>
              <span class="crimson-card__discount">33% OFF</span>
            </div>
          </div>
        </div>
        
        <div class="crimson-card">
          <div class="crimson-card__image-wrapper">
            <div class="crimson-card__image" style="background: linear-gradient(135deg, #e8f8e8 0%, #c8e8c8 100%); display: flex; align-items: center; justify-content: center;">
              <span style="font-size: 48px;">üêò</span>
            </div>
            <span class="crimson-card__badge crimson-card__badge--express">‚ö° EXPRESS</span>
            <button class="crimson-card__wishlist"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg></button>
            <div class="crimson-card__rating"><svg width="10" height="10" viewBox="0 0 24 24" fill="#f59e0b"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg> 4.7</div>
          </div>
          <div class="crimson-card__content">
            <p class="crimson-card__brand">AONA INDIA</p>
            <h3 class="crimson-card__title">Resin Elephant Pair</h3>
            <div class="crimson-card__price-row">
              <span class="crimson-card__price">‚Çπ1,299</span>
              <span class="crimson-card__compare-price">‚Çπ1,799</span>
              <span class="crimson-card__discount">28% OFF</span>
            </div>
          </div>
        </div>
      {%- endfor -%}
    </div>
    
    <button class="load-more-btn">Load More Products</button>
  </div>

  <!-- Trust Section -->
  <div class="trust-section">
    <div class="trust-item">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#880015" stroke-width="2">
        <rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h4l3 3v5h-7V8z"/>
        <circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/>
      </svg>
      <span>30 Min Delivery</span>
    </div>
    <div class="trust-item">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#880015" stroke-width="2">
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
      </svg>
      <span>Secure Packaging</span>
    </div>
    <div class="trust-item">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#880015" stroke-width="2">
        <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
        <polyline points="22 4 12 14.01 9 11.01"/>
      </svg>
      <span>Quality Assured</span>
    </div>
  </div>
</div>

<style>
/* Express Page Styles */
.express-page {
  padding-bottom: 100px;
  background: #f9f9f9;
}

.express-header {
  background: linear-gradient(135deg, #880015 0%, #a91d1d 50%, #6b0012 100%);
  padding: 32px 20px;
  color: white;
  text-align: center;
}

.express-header-content {
  max-width: 400px;
  margin: 0 auto;
}

.express-badge {
  display: inline-block;
  background: rgba(255,255,255,0.2);
  padding: 6px 16px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 1px;
  margin-bottom: 12px;
}

.express-title {
  font-family: 'Playfair Display', serif;
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 8px;
}

.express-subtitle {
  font-size: 14px;
  opacity: 0.9;
  margin-bottom: 20px;
}

.express-timer {
  display: flex;
  justify-content: center;
  gap: 8px;
  background: rgba(255,255,255,0.15);
  padding: 12px 20px;
  border-radius: 12px;
}

.timer-item {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.timer-value {
  font-size: 24px;
  font-weight: 700;
  font-family: monospace;
}

.timer-label {
  font-size: 10px;
  opacity: 0.8;
  text-transform: uppercase;
}

.timer-sep {
  font-size: 24px;
  font-weight: 700;
  align-self: flex-start;
  margin-top: 2px;
}

/* Location Section */
.location-section {
  padding: 20px 16px;
}

.location-card {
  background: white;
  border-radius: 16px;
  padding: 20px;
  display: flex;
  gap: 16px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.06);
}

.location-icon {
  width: 48px;
  height: 48px;
  background: #fff5f5;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.location-content {
  flex: 1;
}

.location-content h3 {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 4px;
  color: #1a1a1a;
}

.location-content p {
  font-size: 13px;
  color: #666;
  margin-bottom: 12px;
}

.pincode-input-group {
  display: flex;
  gap: 8px;
}

.pincode-input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  font-size: 15px;
}

.pincode-input:focus {
  outline: none;
  border-color: #880015;
}

.pincode-btn {
  padding: 12px 24px;
  background: #880015;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
}

.delivery-result {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  padding: 12px;
  background: #f0fdf4;
  border-radius: 8px;
  font-size: 13px;
  color: #166534;
}

/* How It Works */
.how-it-works {
  padding: 24px 16px;
}

.section-heading {
  font-family: 'Playfair Display', serif;
  font-size: 20px;
  font-weight: 600;
  margin-bottom: 16px;
  color: #1a1a1a;
}

.steps-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

.step-card {
  background: white;
  border-radius: 12px;
  padding: 16px 8px;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

.step-icon {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 12px;
}

.step-card h4 {
  font-size: 12px;
  font-weight: 600;
  color: #1a1a1a;
  margin-bottom: 4px;
}

.step-card p {
  font-size: 10px;
  color: #666;
}

/* Products Grid */
.express-products {
  padding: 24px 16px;
}

.products-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  margin-bottom: 20px;
}

/* Crimson Card Styles */
.crimson-card {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 2px 12px rgba(0,0,0,0.06);
}

.crimson-card__image-wrapper {
  position: relative;
  aspect-ratio: 3/4;
  overflow: hidden;
}

.crimson-card__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  background: #f5f5f5;
}

.crimson-card__badge {
  position: absolute;
  top: 8px;
  left: 8px;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
}

.crimson-card__badge--express {
  background: #16a34a;
  color: white;
}

.crimson-card__badge--new {
  background: #880015;
  color: white;
}

.crimson-card__badge--handcrafted {
  background: #d4af37;
  color: white;
}

.crimson-card__wishlist {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 32px;
  height: 32px;
  background: white;
  border: none;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  color: #999;
  transition: all 0.2s;
}

.crimson-card__wishlist:hover,
.crimson-card__wishlist.active {
  color: #a91d1d;
}

.crimson-card__wishlist.active svg {
  fill: #a91d1d;
}

.crimson-card__rating {
  position: absolute;
  bottom: 8px;
  left: 8px;
  background: rgba(255,255,255,0.95);
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 3px;
}

.crimson-card__content {
  padding: 12px;
}

.crimson-card__brand {
  font-size: 10px;
  font-weight: 700;
  color: #a91d1d;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}

.crimson-card__title {
  font-size: 13px;
  font-weight: 500;
  color: #1a1a1a;
  line-height: 1.3;
  margin-bottom: 8px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.crimson-card__price-row {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 6px;
}

.crimson-card__price {
  font-size: 14px;
  font-weight: 700;
  color: #1a1a1a;
}

.crimson-card__compare-price {
  font-size: 12px;
  color: #999;
  text-decoration: line-through;
}

.crimson-card__discount {
  font-size: 11px;
  font-weight: 600;
  color: #a91d1d;
  background: #fff5f5;
  padding: 2px 6px;
  border-radius: 4px;
}

/* Load More Button */
.load-more-btn {
  width: 100%;
  padding: 14px;
  background: #880015;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
}

/* Trust Section */
.trust-section {
  display: flex;
  justify-content: center;
  gap: 24px;
  padding: 24px 16px;
  background: white;
  margin-top: 16px;
}

.trust-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  font-weight: 500;
  color: #666;
  text-align: center;
}

/* Responsive */
@media (max-width: 400px) {
  .steps-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
</style>

<script>
// Express Timer
(function() {
  let seconds = 1800; // 30 minutes
  const timer = setInterval(() => {
    const hrs = Math.floor(seconds / 3600);
    const mins = Math.floor((seconds % 3600) / 60);
    const secs = seconds % 60;
    
    const hrsEl = document.getElementById('express-hours');
    const minsEl = document.getElementById('express-mins');
    const secsEl = document.getElementById('express-secs');
    
    if (hrsEl) hrsEl.textContent = hrs.toString().padStart(2, '0');
    if (minsEl) minsEl.textContent = mins.toString().padStart(2, '0');
    if (secsEl) secsEl.textContent = secs.toString().padStart(2, '0');
    
    if (seconds > 0) seconds--;
    else seconds = 1800;
  }, 1000);
})();

// Pincode Check
// FIX: Dynamic Pincode Check using Theme Settings
document.querySelector('.pincode-btn')?.addEventListener('click', function() {
  const input = document.querySelector('.pincode-input');
  const result = document.querySelector('.delivery-result');
  const pincode = input.value.trim();

  // Get pincodes from theme settings (convert liquid string to JS array)
  const availablePincodes = "{{ settings.express_pincodes }}".split(',').map(p => p.trim());
  
  if (pincode.length !== 6) {
    alert("Please enter a valid 6-digit pincode");
    return;
  }

  if (availablePincodes.includes(pincode)) {
    // Success
    result.innerHTML = `
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2">
        <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
        <polyline points="22 4 12 14.01 9 11.01"/>
      </svg>
      <span>Express delivery available! Get it in <strong>30 minutes</strong></span>
    `;
    result.style.color = "#166534";
    result.style.backgroundColor = "#f0fdf4";
  } else {
    // Failure
    result.innerHTML = `
      <span style="color: #991b1b;">Sorry, express delivery is not available for this pincode.</span>
    `;
    result.style.backgroundColor = "#fef2f2";
  }
  
  result.style.display = 'flex';
});

// Wishlist Toggle
document.querySelectorAll('.crimson-card__wishlist').forEach(btn => {
  btn.addEventListener('click', function(e) {
    e.preventDefault();
    this.classList.toggle('active');
    const svg = this.querySelector('svg');
    if (this.classList.contains('active')) {
      svg.setAttribute('fill', '#a91d1d');
    } else {
      svg.setAttribute('fill', 'none');
    }
  });
});
</script>
