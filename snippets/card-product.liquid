{% comment %}
  FIXED PRODUCT CARD - Premium Hover Effects
  - Floating Quick Add Button with Bag Icon
  - White -> Solid Red Button Hover State
  - Image Bottom Shadow Gradient on Hover
  - Red Pricing & Pink Discount Pill
{% endcomment %}

<div class="product-card">
  <div class="product-card__image-wrapper">
    <a href="{{ product.url }}" class="product-card__link">
      <div class="product-card__image-container">
        {% if product.featured_media %}
          <img 
            src="{{ product.featured_media | image_url: width: 600 }}" 
            alt="{{ product.title | escape }}"
            class="product-card__image"
            loading="lazy"
            width="300"
            height="300"
          >
        {% else %}
          {{ 'product-1' | placeholder_svg_tag: 'product-card__image' }}
        {% endif %}
        
        <!-- Dark gradient overlay that appears on hover -->
        <div class="product-card__hover-gradient"></div>
      </div>
    </a>
    
    <!-- TOP BADGE -->
    <div class="product-card__badges">
      {% if product.compare_at_price > product.price %}
        {% assign discount = product.compare_at_price | minus: product.price | times: 100.0 | divided_by: product.compare_at_price | round %}
        <span class="pc-badge pc-badge--sale">{{ discount }}% OFF</span>
      {% else %}
        {% assign date_created = product.created_at | date: '%s' %}
        {% assign date_now = 'now' | date: '%s' %}
        {% assign difference = date_now | minus: date_created %}
        {% if difference < 2592000 %}
          <span class="pc-badge pc-badge--new">NEW</span>
        {% endif %}
      {% endif %}
    </div>
    
    <!-- WISHLIST BUTTON -->
    <button class="product-card__wishlist" aria-label="Add to wishlist" onclick="this.classList.toggle('active')">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
      </svg>
    </button>

    <!-- QUICK ADD TO CART (Slides up on card hover) -->
    <div class="product-card__quick-add">
      <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
      <button type="button" class="product-card__add-btn" onclick="quickAddToCart(this)">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <path d="M16 10a4 4 0 0 1-8 0"></path>
        </svg>
        <span>QUICK ADD</span>
      </button>
    </div>
  </div>
  
  <!-- PRODUCT INFO -->
  <div class="product-card__info">
    <p class="product-card__vendor">{{ product.vendor | default: 'AONA' }}</p>
    <h3 class="product-card__title">
      <a href="{{ product.url }}">{{ product.title }}</a>
    </h3>
    
    <div class="product-card__price-row">
      <span class="product-card__price">{{ product.price | money }}</span>
      {% if product.compare_at_price > product.price %}
        <span class="product-card__compare">{{ product.compare_at_price | money }}</span>
        <span class="product-card__discount-pill">{{ discount }}% OFF</span>
      {% endif %}
    </div>
  </div>
</div>

<style>
/* 1. CARD CONTAINER */
.product-card {
  background: white;
  border: 1px solid #eee;
  border-radius: 8px;
  overflow: hidden;
  position: relative;
  height: 100%;
  display: flex;
  flex-direction: column;
  transition: box-shadow 0.2s ease, transform 0.2s ease;
}

.product-card:hover {
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  transform: translateY(-2px);
}

/* 2. IMAGE CONTAINER */
.product-card__image-wrapper {
  position: relative;
  overflow: hidden;
}

.product-card__image-container {
  position: relative;
  width: 100%;
  padding-top: 100%; /* 1:1 Aspect Ratio (Square) */
  background: #f9f9f9; 
}

.product-card__image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  padding: 10px;
  transition: transform 0.4s ease;
}

.product-card:hover .product-card__image {
  transform: scale(1.04);
}

/* 3. HOVER GRADIENT (Makes the white button readable) */
.product-card__hover-gradient {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 50%;
  background: linear-gradient(to top, rgba(0,0,0,0.6) 0%, transparent 100%);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.product-card:hover .product-card__hover-gradient {
  opacity: 1;
}

/* 4. BADGES */
.product-card__badges {
  position: absolute;
  top: 10px;
  left: 10px;
  z-index: 2;
}

.pc-badge {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
}

.pc-badge--sale { background: #e53935; } /* Red Badge */
.pc-badge--new { background: #03a685; } 

/* 5. WISHLIST BUTTON */
.product-card__wishlist {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 32px;
  height: 32px;
  background: white;
  border-radius: 50%;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 3;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  padding: 0;
  transition: transform 0.2s ease;
}

.product-card__wishlist svg {
  width: 18px;
  height: 18px;
  color: #666;
  fill: none;
  transition: all 0.2s ease;
}

.product-card__wishlist:hover {
  transform: scale(1.1);
}

.product-card__wishlist.active svg {
  color: #a91d1d;
  fill: #a91d1d;
}

/* 6. QUICK ADD TO CART BUTTON */
.product-card__quick-add {
  position: absolute;
  bottom: 12px; /* Margin from the bottom of the image */
  left: 12px;
  right: 12px;
  transform: translateY(120%);
  opacity: 0;
  transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.3s;
  z-index: 4;
}

.product-card:hover .product-card__quick-add {
  transform: translateY(0); 
  opacity: 1;
}

/* State 1: Card is hovered (White Button, Red Text) */
.product-card__add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  padding: 10px;
  background: white;
  color: #a91d1d;
  border: 1px solid #a91d1d;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 700;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

.product-card__add-btn svg {
  stroke: #a91d1d;
  transition: stroke 0.2s ease;
}

/* State 2: Button itself is hovered (Red Button, White Text) */
.product-card__add-btn:hover {
  background: #a91d1d;
  color: white;
}

.product-card__add-btn:hover svg {
  stroke: white;
}

/* 7. TEXT CONTENT (Matches Screenshot perfectly) */
.product-card__info {
  padding: 16px;
  background: white;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
}

.product-card__vendor {
  font-size: 11px;
  font-weight: 700;
  color: #a91d1d; /* Red vendor name */
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 6px;
}

.product-card__title a {
  font-size: 14px;
  color: #333;
  text-decoration: none;
  font-weight: 500;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  margin-bottom: 12px;
  line-height: 1.4;
}

.product-card__price-row {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: auto;
}

.product-card__price {
  font-size: 15px;
  font-weight: 700;
  color: #a91d1d; /* Bold Red Price */
}

.product-card__compare {
  font-size: 13px;
  text-decoration: line-through;
  color: #a91d1d; /* Strikethrough Red */
  font-weight: 600;
}

.product-card__discount-pill {
  font-size: 10px;
  font-weight: 700;
  color: #a91d1d;
  background: #fff0f0; /* Light pink background */
  padding: 3px 6px;
  border-radius: 4px;
}

/* Hide hover button on mobile */
@media (max-width: 991px) {
  .product-card__quick-add {
    display: none;
  }
}
</style>