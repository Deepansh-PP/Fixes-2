{% schema %}
{
  "name": "Square Categories",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Shop By Category" }
  ],
  "blocks": [
    {
      "type": "cat",
      "name": "Category",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "text", "id": "title", "label": "Title" },
        { "type": "url", "id": "link", "label": "Link" }
      ]
    }
  ],
  "presets": [{ "name": "Square Categories" }]
}
{% endschema %}

<div class="sq-cat-section">
  <h2 class="sq-heading">{{ section.settings.heading }}</h2>
  <div class="sq-grid">
    {% for block in section.blocks %}
      <a href="{{ block.settings.link }}" class="sq-item">
        <div class="sq-img-wrap">
          <img src="{{ block.settings.image | image_url: width: 300 }}" alt="{{ block.settings.title }}">
        </div>
        <p class="sq-title">{{ block.settings.title }}</p>
      </a>
    {% endfor %}
  </div>
</div>

<style>
.sq-cat-section { padding: 20px 10px; background: #fff; }
.sq-heading { 
  font-family: 'Playfair Display', serif; 
  font-size: 20px; 
  margin-bottom: 15px; 
  color: #333;
  padding-left: 5px;
  border-left: 4px solid var(--color-royal-red); /* Aona branding */
}
.sq-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* 3 per row on mobile */
  gap: 10px;
}
.sq-item { text-decoration: none; text-align: center; }
.sq-img-wrap {
  background: #f5f5f5;
  border-radius: 8px;
  overflow: hidden;
  aspect-ratio: 1/1; /* Perfect Square */
  margin-bottom: 8px;
}
.sq-img-wrap img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
.sq-item:hover img { transform: scale(1.05); }
.sq-title { font-size: 13px; color: #555; font-weight: 500; }

@media (min-width: 992px) {
  .sq-cat-section { padding: 40px; }
  .sq-grid { grid-template-columns: repeat(6, 1fr); gap: 20px; }
  .sq-heading { font-size: 28px; margin-bottom: 25px; }
}
</style>